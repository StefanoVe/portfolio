<div class="font-syne px-4 z-20">
  <div class="flex justify-end">
    <div>
      <app-title [title]="titleTxt"></app-title>
      <div class="font-syne text-small text-end opacity-75 p-4">
        {{ lastUpdateTxt }} {{ lastUpdate }}
      </div>
    </div>
  </div>

  <div class="center my-10">
    <div class="flex flex-col space-y-6 w-full relative">
      <div #skillsContainer class="w-0 smooth space-y-4">
        <ng-container
          *ngFor="let item of skills"
          [ngTemplateOutlet]="progressBar"
          [ngTemplateOutletContext]="item"
        ></ng-container>
      </div>
      <div class="border-t flex justify-end py-4 xl:text-xl">
        <span
          class="
            delay-[3000ms]
            smooth
            -translate-y-10
            opacity-0
            text-left
            whitespace-nowrap
          "
          #totalHoursText
        >
          {{ totalHours() }} h</span
        >
      </div>
    </div>
  </div>

  <ng-template
    #progressBar
    let-colorClass="color"
    let-progress="recordedHours"
    let-lang="language"
    let-index="index"
  >
    <div class="text-left space-y-2">
      <div>
        <span class="truncate"> {{ lang }} </span>
        <div class="flex relative">
          <div
            class="
              h-1
              p-[0.1rem]
              rounded-xl
              shadow-lg
              dark:brightness-75
              smooth
            "
            [ngStyle]="{
              'background-color': colorClass,
              width: hoursPercentage(progress) + '%'
            }"
          ></div>
          <div
            class="
              h-1
              p-[0.1rem]
              rounded-xl
              w-9/12
              lg:w-[90%]
              2xl:w-11/12
              opacity-40
              absolute
              bg-slate-300
              dark:bg-slate-600
              xl:-z-[1]
              shadow-lg
            "
          ></div>
          <div
            #progressText
            class="
              absolute
              right-0
              -mt-3
              smooth
              opacity-0
              delay-1000
              translate-x-9
              px-2
              py-1
              xl:backdrop-blur
              text-sm
            "
          >
            {{ progress }} h
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</div>
